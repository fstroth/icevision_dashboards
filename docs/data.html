---

title: data


keywords: fastai
sidebar: home_sidebar

summary: "Provides dataset for icevision records and classmaps"
description: "Provides dataset for icevision records and classmaps"
nb_path: "nbs/data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre><span class="ansi-bold">INFO    </span> - <span class="ansi-bold">The mmdet config folder already exists. No need to downloaded it. Path : /home/frederik/.icevision/mmdetection_configs/mmdetection_configs-2.16.0/configs</span> | <span class="ansi-cyan-fg">icevision.models.mmdet.download_configs</span>:<span class="ansi-cyan-fg">download_mmdet_configs</span>:<span class="ansi-cyan-fg">17</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-data-setup">Test data setup<a class="anchor-link" href="#Test-data-setup"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">icedata</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_object_detection_data_dir</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">test_object_detection_class_map</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">class_map</span><span class="p">()</span>
<span class="n">test_object_detection_parser</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="n">test_object_detection_data_dir</span><span class="p">)</span>
<span class="n">test_object_detection_train_records</span><span class="p">,</span> <span class="n">test_object_detection_valid_records</span> <span class="o">=</span> <span class="n">test_object_detection_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_instance_segmentation_data_path</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">pennfudan</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">test_instance_segmentation_parser</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">pennfudan</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="n">data_dir</span><span class="o">=</span><span class="n">test_instance_segmentation_data_path</span><span class="p">)</span>
<span class="n">test_instance_segmentation_train_records</span><span class="p">,</span> <span class="n">test_instance_segmentation_valid_records</span> <span class="o">=</span> <span class="n">test_instance_segmentation_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">test_instance_segmentation_class_map</span> <span class="o">=</span> <span class="n">test_instance_segmentation_train_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">class_map</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="General">General<a class="anchor-link" href="#General"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="RecordDataframeParser" class="doc_header"><code>class</code> <code>RecordDataframeParser</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L45" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>RecordDataframeParser</code>(<strong><code>record_template</code></strong>) :: <code>Parser</code></p>
</blockquote>
<p>IceVision parser for pandas dataframes. This parser is mostly used by the RecordDataset to load records from a saved RecordDataset.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="RecordDataset" class="doc_header"><code>class</code> <code>RecordDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L68" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>RecordDataset</code>(<strong><code>records</code></strong>:<code>Union</code>[<code>List</code>[<code>BaseRecord</code>], <a href="/icevision_dashboards/core.data.html#ObservableList"><code>ObservableList</code></a>, <code>str</code>], <strong><code>class_map</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/core.data.html#GenericDataset"><code>GenericDataset</code></a></p>
</blockquote>
<p>Base class dashboard datasets that are based on IceVision records.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ResultsDataset" class="doc_header"><code>class</code> <code>ResultsDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L167" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ResultsDataset</code>(<strong><code>dataframe</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/core.data.html#GenericDataset"><code>GenericDataset</code></a></p>
</blockquote>
<p>Dashboard dataset for the results of and object detection system.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Object-detection">Object detection<a class="anchor-link" href="#Object-detection"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BboxRecordDataframeParser" class="doc_header"><code>class</code> <code>BboxRecordDataframeParser</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L208" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BboxRecordDataframeParser</code>(<strong><code>record_dataframe</code></strong>, <strong><code>class_map</code></strong>) :: <a href="/icevision_dashboards/data.html#RecordDataframeParser"><code>RecordDataframeParser</code></a></p>
</blockquote>
<p>Extends the RecordDataframeParser for object detection</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataDescriptorBbox" class="doc_header"><code>class</code> <code>DataDescriptorBbox</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L220" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataDescriptorBbox</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Dashboard dataset for object detection</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="StatsDescriptorBbox" class="doc_header"><code>class</code> <code>StatsDescriptorBbox</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L253" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>StatsDescriptorBbox</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ImageStatsDescriptorBbox" class="doc_header"><code>class</code> <code>ImageStatsDescriptorBbox</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L268" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ImageStatsDescriptorBbox</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ClassStatsDescriptorBbox" class="doc_header"><code>class</code> <code>ClassStatsDescriptorBbox</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L280" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ClassStatsDescriptorBbox</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="GalleryStatsDescriptorBbox" class="doc_header"><code>class</code> <code>GalleryStatsDescriptorBbox</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L297" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>GalleryStatsDescriptorBbox</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BboxRecordDataset" class="doc_header"><code>class</code> <code>BboxRecordDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L304" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BboxRecordDataset</code>(<strong><code>records</code></strong>:<code>Union</code>[<code>List</code>[<code>BaseRecord</code>], <a href="/icevision_dashboards/core.data.html#ObservableList"><code>ObservableList</code></a>, <code>str</code>], <strong><code>class_map</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/data.html#RecordDataset"><code>RecordDataset</code></a></p>
</blockquote>
<p>Base class dashboard datasets that are based on IceVision records.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_object_detection_record_dataset</span> <span class="o">=</span> <span class="n">BboxRecordDataset</span><span class="p">(</span><span class="n">test_object_detection_valid_records</span><span class="p">,</span> <span class="n">test_object_detection_class_map</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats_class</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats_image</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span> <span class="nb">str</span><span class="p">)</span>
<span class="n">test_object_detection_split_train_records</span><span class="p">,</span> <span class="n">test_object_detection_split_valid_records</span> <span class="o">=</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">split_in_train_and_val</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">base_data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_split_train_records</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_split_valid_records</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">num_images</span> <span class="o">==</span> <span class="mi">26</span>

<span class="n">test_object_detection_added_record_dataset</span> <span class="o">=</span> <span class="n">test_object_detection_record_dataset</span> <span class="o">+</span> <span class="n">test_object_detection_record_dataset</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_added_record_dataset</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span>
<span class="k">assert</span> <span class="n">test_object_detection_added_record_dataset</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">test_object_detection_added_record_dataset</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">test_object_detection_added_record_dataset</span><span class="o">.</span><span class="n">class_map</span> <span class="o">==</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">class_map</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_object_detection_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">test_object_detection_mask</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">test_object_detection_masked_record</span> <span class="o">=</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">create_new_from_mask</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="p">,</span> <span class="n">test_object_detection_mask</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_masked_record</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_object_detection_old_record_dataset_stats</span> <span class="o">=</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span>
<span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="n">test_object_detection_train_records</span>
<span class="n">test_object_detection_new_record_dataset_stats</span> <span class="o">=</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">test_object_detection_new_record_dataset_stats</span> <span class="o">!=</span> <span class="n">test_object_detection_old_record_dataset_stats</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_object_detection_regenerated_record_dataset</span> <span class="o">=</span> <span class="n">BboxRecordDataset</span><span class="o">.</span><span class="n">load_from_record_dataframe</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">test_object_detection_class_map</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_regenerated_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="p">)</span>
<span class="n">test_object_detection_regenerated_record_dataset_no_class_map</span> <span class="o">=</span> <span class="n">BboxRecordDataset</span><span class="o">.</span><span class="n">load_from_record_dataframe</span><span class="p">(</span><span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">test_object_detection_regenerated_record_dataset_no_class_map</span><span class="o">.</span><span class="n">class_map</span><span class="o">.</span><span class="n">_id2class</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">test_object_detection_class_map</span><span class="o">.</span><span class="n">_id2class</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s2">&quot;dump_dir/dataset.json&quot;</span><span class="p">)</span>
<span class="n">test_object_detection_loaded_record_dataset</span> <span class="o">=</span> <span class="n">BboxRecordDataset</span><span class="p">(</span><span class="s2">&quot;dump_dir/dataset.json&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">test_object_detection_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">test_object_detection_loaded_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PrecisionRecallMetricsDescriptorObjectDetection" class="doc_header"><code>class</code> <code>PrecisionRecallMetricsDescriptorObjectDetection</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L331" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PrecisionRecallMetricsDescriptorObjectDetection</code>(<strong><code>ious</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ObjectDetectionResultsDataset" class="doc_header"><code>class</code> <code>ObjectDetectionResultsDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L342" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ObjectDetectionResultsDataset</code>(<strong><code>dataframe</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/data.html#ResultsDataset"><code>ResultsDataset</code></a></p>
</blockquote>
<p>Dashboard dataset for the results of and object detection system.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_odrd</span> <span class="o">=</span> <span class="n">ObjectDetectionResultsDataset</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;test_data/object_detection_result_ds.dat&quot;</span><span class="p">)</span>
<span class="n">test_object_detection_preds</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test_data/object_detection_preds.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>
<span class="n">test_object_detection_samples</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test_data/object_detection_samples.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>

<span class="c1"># make the saved samples indipendent of the saved enviroment</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">test_object_detection_samples</span><span class="p">:</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">test_object_detection_data_dir</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.icevision&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="n">test_odrd_from_samples</span> <span class="o">=</span> <span class="n">ObjectDetectionResultsDataset</span><span class="o">.</span><span class="n">init_from_preds_and_samples</span><span class="p">(</span><span class="n">test_object_detection_preds</span><span class="p">,</span> <span class="n">test_object_detection_samples</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Instance-segmentation">Instance segmentation<a class="anchor-link" href="#Instance-segmentation"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="InstanceSegmentationRecordDataframeParser" class="doc_header"><code>class</code> <code>InstanceSegmentationRecordDataframeParser</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L427" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>InstanceSegmentationRecordDataframeParser</code>(<strong><code>record_dataframe</code></strong>, <strong><code>class_map</code></strong>) :: <a href="/icevision_dashboards/data.html#RecordDataframeParser"><code>RecordDataframeParser</code></a></p>
</blockquote>
<p>Extends the RecordDataframeParser for instance segmentation</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>DataDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L445" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataDescriptorInstanceSegmentation</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Dashboard dataset for object detection</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="StatsDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>StatsDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L487" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>StatsDescriptorInstanceSegmentation</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ImageStatsDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>ImageStatsDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L502" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ImageStatsDescriptorInstanceSegmentation</code>() :: <a href="/icevision_dashboards/data.html#ImageStatsDescriptorBbox"><code>ImageStatsDescriptorBbox</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ClassStatsDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>ClassStatsDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L506" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ClassStatsDescriptorInstanceSegmentation</code>() :: <a href="/icevision_dashboards/data.html#ClassStatsDescriptorBbox"><code>ClassStatsDescriptorBbox</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="GalleryStatsDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>GalleryStatsDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L523" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>GalleryStatsDescriptorInstanceSegmentation</code>() :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="InstanceSegmentationRecordDataset" class="doc_header"><code>class</code> <code>InstanceSegmentationRecordDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L530" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>InstanceSegmentationRecordDataset</code>(<strong><code>records</code></strong>:<code>Union</code>[<code>List</code>[<code>BaseRecord</code>], <a href="/icevision_dashboards/core.data.html#ObservableList"><code>ObservableList</code></a>, <code>str</code>], <strong><code>class_map</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/data.html#RecordDataset"><code>RecordDataset</code></a></p>
</blockquote>
<p>Base class dashboard datasets that are based on IceVision records.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_instance_segmentation_record_dataset</span> <span class="o">=</span> <span class="n">InstanceSegmentationRecordDataset</span><span class="p">(</span><span class="n">test_instance_segmentation_train_records</span><span class="p">,</span> <span class="n">test_instance_segmentation_train_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">class_map</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats_class</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats_image</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_instance_segmentation_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">]</span><span class="o">*</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">test_instance_segmentation_mask</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">test_instance_segmentation_masked_test_record</span> <span class="o">=</span> <span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">create_new_from_mask</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="p">,</span> <span class="n">test_instance_segmentation_mask</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_instance_segmentation_masked_test_record</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_old_record_dataset_stats</span> <span class="o">=</span> <span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span>
<span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="n">test_instance_segmentation_train_records</span>
<span class="n">test_new_record_dataset_stats</span> <span class="o">=</span> <span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">stats_dataset</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">test_old_record_dataset_stats</span> <span class="o">!=</span> <span class="n">test_new_record_dataset_stats</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_instance_segmentation_regenerated_record_dataset</span> <span class="o">=</span> <span class="n">InstanceSegmentationRecordDataset</span><span class="o">.</span><span class="n">load_from_record_dataframe</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">test_instance_segmentation_class_map</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_instance_segmentation_regenerated_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">records</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;dataset_instance_segmentation&quot;</span>
<span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s2">&quot;dump_dir/dataset_instance_segmentation.json&quot;</span><span class="p">)</span>
<span class="n">test_instance_segmentation_loaded_record_dataset</span> <span class="o">=</span> <span class="n">InstanceSegmentationRecordDataset</span><span class="p">(</span><span class="s2">&quot;dump_dir/dataset_instance_segmentation.json&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">test_instance_segmentation_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">test_instance_segmentation_loaded_record_dataset</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;dump_dir&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PrecisionRecallMetricsDescriptorInstanceSegmentation" class="doc_header"><code>class</code> <code>PrecisionRecallMetricsDescriptorInstanceSegmentation</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L557" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PrecisionRecallMetricsDescriptorInstanceSegmentation</code>(<strong><code>ious</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a></p>
</blockquote>
<p>Abstract base class for descriptors of datasets.
The private name of the descriptor is the defined name with a prefix _.
The <strong>get</strong> function will call the calculate_description function if the value of the descriptor is None and then return the value else it will just return the value of the descriptor.
The <strong>set</strong> function only allows for the attribute to be set to None, which will trigger a recomputation the next time the <strong>get</strong> function is called.
When inheriting this class the function calculate_description needs to be implemented, which defines how the private value should be calculated.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="InstanceSegmentationResultsDataset" class="doc_header"><code>class</code> <code>InstanceSegmentationResultsDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/data.py#L568" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>InstanceSegmentationResultsDataset</code>(<strong><code>dataframe</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>description</code></strong>=<em><code>None</code></em>) :: <a href="/icevision_dashboards/data.html#ResultsDataset"><code>ResultsDataset</code></a></p>
</blockquote>
<p>Dashboard dataset for the results of and object detection system.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_instance_segmentation_odrd</span> <span class="o">=</span> <span class="n">InstanceSegmentationResultsDataset</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;test_data/instance_segmentation_result_ds_valid.dat&quot;</span><span class="p">)</span>
<span class="n">test_instance_segmentation_preds</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test_data/instance_segmentation_preds.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>
<span class="n">test_instance_segmentation_samples</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test_data/instance_segmentation_samples.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>

<span class="c1"># make the saved samples indipendent of the saved enviroment</span>
<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">test_instance_segmentation_samples</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">sample</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">FilepathRecordComponent</span><span class="p">):</span>
            <span class="n">_</span><span class="o">.</span><span class="n">set_filepath</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">test_instance_segmentation_data_path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.icevision&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">masks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">test_instance_segmentation_data_path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.icevision&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.icevision&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        
<span class="n">test_odrd_from_samples</span> <span class="o">=</span> <span class="n">InstanceSegmentationResultsDataset</span><span class="o">.</span><span class="n">init_from_preds_and_samples</span><span class="p">(</span><span class="n">test_instance_segmentation_preds</span><span class="p">,</span> <span class="n">test_instance_segmentation_samples</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

